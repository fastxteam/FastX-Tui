# 日志管理

## 概述

FastX-Tui 提供了强大的日志管理功能，用于记录应用程序的运行状态、错误信息和调试信息。日志系统支持多级别日志、日志筛选、日志搜索和日志导出。

## 日志级别

FastX-Tui 使用以下日志级别（从低到高）：

| 级别 | 描述 | 示例 |
|------|------|------|
| `TRACE` | 最详细的调试信息，包含函数调用、参数等 | 函数调用、变量值 |
| `DEBUG` | 调试信息，用于开发和调试 | 模块加载、配置信息 |
| `INFO` | 一般信息，用于记录正常运行状态 | 应用启动、用户操作 |
| `WARNING` | 警告信息，用于记录潜在问题 | 配置过时、资源不足 |
| `ERROR` | 错误信息，用于记录错误情况 | 功能失效、异常发生 |
| `CRITICAL` | 严重错误信息，用于记录导致应用崩溃的问题 | 致命异常、系统错误 |

## 查看日志

您可以通过以下方式查看 FastX-Tui 的日志：

### 1. 在应用中查看

1. 从主菜单选择「日志管理」
2. 选择「查看日志」
3. 使用方向键浏览日志
4. 按 `Enter` 键查看日志详情

### 2. 直接查看日志文件

日志文件位于以下位置：

- **Windows**: `%APPDATA%\FastX-Tui\logs\`
- **macOS**: `~/.config/fastx-tui/logs/`
- **Linux**: `~/.config/fastx-tui/logs/`

日志文件按日期命名，例如 `fastx-tui_2025-12-28_19-30-45.log`。

## 日志筛选

FastX-Tui 允许您根据日志级别筛选日志：

1. 从主菜单选择「日志管理」
2. 选择「查看日志」
3. 按 `F1` 键打开筛选菜单
4. 使用方向键选择要显示的日志级别
5. 按 `Space` 键切换选中状态
6. 按 `Enter` 键应用筛选

## 日志搜索

您可以搜索日志内容：

1. 从主菜单选择「日志管理」
2. 选择「查看日志」
3. 按 `F2` 键打开搜索框
4. 输入搜索关键词
5. 按 `Enter` 键开始搜索
6. 使用 `F3` 键查看下一个匹配项
7. 使用 `Shift+F3` 键查看上一个匹配项

## 日志导出

您可以导出日志文件：

1. 从主菜单选择「日志管理」
2. 选择「导出日志」
3. 选择要导出的日志文件
4. 选择导出位置
5. 按 `Enter` 键导出

## 日志配置

您可以配置日志系统的行为：

### 1. 通过设置界面配置

1. 按 `S` 键打开设置界面
2. 选择「行为设置」
3. 调整「日志级别」和其他日志相关设置

### 2. 通过配置文件配置

编辑配置文件，修改以下日志相关配置：

```yaml
logging:
  level: INFO
  file_path: "logs/fastx-tui_{time}.log"
  rotation: "1 day"
  retention: "7 days"
  compression: "zip"
```

## 日志格式

FastX-Tui 的日志格式包含以下信息：

- 时间戳
- 日志级别
- 模块名称
- 日志消息
- （可选）异常信息

示例日志：

```
2025-12-28 19:30:45.123 | INFO     | core.app_manager:start:123 - FastX-Tui v0.1.54 已启动
2025-12-28 19:30:45.456 | DEBUG    | core.plugin_manager:load_plugins:456 - 加载插件: ExamplePlugin
2025-12-28 19:30:45.789 | WARNING  | core.config_manager:load_config:789 - 配置项 'old_config' 已过时
```

## 调试模式

启用调试模式可以记录更详细的日志信息：

1. 按 `S` 键打开设置界面
2. 选择「高级设置」
3. 启用「调试模式」
4. 重启 FastX-Tui

或者使用命令行参数：

```bash
fastx-tui --debug
```

## 插件日志

插件可以使用系统提供的日志接口记录日志：

```python
def some_method(self):
    self.log_debug("调试日志")
    self.log_info("信息日志")
    self.log_warning("警告日志")
    self.log_error("错误日志")
    self.log_critical("严重错误日志")
```

插件日志会包含在 FastX-Tui 的统一日志中，便于集中管理和查看。

## 常见问题

### 1. 日志文件太大

您可以通过以下方式减小日志文件大小：

- 提高日志级别，减少日志数量
- 缩短日志保留时间
- 启用日志压缩

### 2. 日志中包含敏感信息

FastX-Tui 会自动屏蔽日志中的敏感信息，例如密码、API 密钥等。如果您发现日志中包含敏感信息，请及时报告给开发团队。

### 3. 日志丢失

如果您发现日志丢失，可以检查：

- 日志文件是否被删除
- 日志级别设置是否正确
- 磁盘空间是否充足

## 下一步

- 了解 [任务管理](task_management.md)
- 查看 [配置参考](../configuration/options.md)
