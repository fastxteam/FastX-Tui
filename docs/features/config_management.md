# 配置管理

## 概述

FastX-Tui 提供了灵活的配置管理系统，允许用户根据自己的需求配置应用程序的外观、行为和功能。配置系统支持分层配置、环境变量覆盖和配置验证。

## 配置类型

FastX-Tui 的配置分为以下几个层次：

### 1. 默认配置

FastX-Tui 内置了一套默认配置，作为所有配置的基础。

### 2. 用户配置

用户可以通过设置界面或直接编辑配置文件来自定义配置。用户配置会覆盖默认配置。

### 3. 环境变量

环境变量可以覆盖用户配置，用于在不同环境中部署 FastX-Tui。

### 4. 命令行参数

命令行参数可以覆盖所有其他配置，用于临时修改配置。

## 配置文件

FastX-Tui 的配置文件位于以下位置：

- **Windows**: `%APPDATA%\FastX-Tui\config.yml`
- **macOS**: `~/.config/fastx-tui/config.yml`
- **Linux**: `~/.config/fastx-tui/config.yml`

配置文件使用 YAML 格式，可以直接编辑。

## 使用设置界面

FastX-Tui 提供了直观的设置界面，您可以通过以下步骤访问：

1. 按 `S` 键打开设置界面，或从主菜单选择「设置」
2. 使用方向键导航不同的设置选项
3. 按 `Enter` 键进入子设置
4. 按 `Space` 键切换开关选项
5. 按 `Enter` 键编辑文本或数值选项
6. 按 `Esc` 键保存并返回上一级

## 设置类别

### 1. 外观设置

外观设置控制 FastX-Tui 的视觉效果：

- **主题**：选择应用程序主题
- **颜色方案**：自定义颜色设置
- **字体大小**：调整字体大小
- **动画效果**：启用/禁用动画效果
- **紧凑模式**：启用/禁用紧凑布局

### 2. 行为设置

行为设置控制 FastX-Tui 的行为：

- **启动选项**：自定义启动行为
- **默认视图**：设置默认打开的视图
- **自动保存**：启用/禁用自动保存配置
- **确认提示**：启用/禁用危险操作的确认提示
- **日志级别**：设置默认日志级别

### 3. 插件设置

插件设置控制插件的行为：

- **自动更新插件**：启用/禁用插件自动更新
- **插件目录**：设置插件存放目录
- **在线插件源**：配置在线插件源

### 4. 高级设置

高级设置包含高级功能配置：

- **使用异步任务**：启用/禁用异步任务执行
- **任务队列大小**：设置任务队列的最大容量
- **工作线程数**：设置工作线程数量
- **调试模式**：启用/禁用调试模式
- **性能监控**：启用/禁用性能监控

## 配置验证

FastX-Tui 会自动验证配置的有效性：

- 检查配置值的类型
- 检查配置值的范围
- 检查配置项的依赖关系
- 检查配置项的兼容性

如果配置无效，FastX-Tui 会显示错误信息，并使用默认值代替无效配置。

## 恢复默认配置

如果您想恢复默认配置，可以：

1. 在设置界面中选择「恢复默认配置」
2. 或删除配置文件，FastX-Tui 会重新创建默认配置文件

## 配置备份和恢复

### 1. 备份配置

1. 从主菜单选择「设置」
2. 选择「配置管理」
3. 选择「备份配置」
4. 选择备份文件的保存位置

### 2. 恢复配置

1. 从主菜单选择「设置」
2. 选择「配置管理」
3. 选择「恢复配置」
4. 选择要恢复的备份文件

## 环境变量

FastX-Tui 支持以下环境变量：

| 环境变量 | 描述 | 默认值 |
|---------|------|--------|
| `FASTX_TUI_CONFIG_DIR` | 配置文件目录 | 系统默认位置 |
| `FASTX_TUI_PLUGIN_DIR` | 插件目录 | 系统默认位置 |
| `FASTX_TUI_LOG_LEVEL` | 日志级别 | `INFO` |
| `FASTX_TUI_DEBUG` | 调试模式 | `false` |
| `FASTX_TUI_THEME` | 应用主题 | `default` |

## 命令行参数

FastX-Tui 支持以下命令行参数：

| 参数 | 描述 |
|------|------|
| `--version` | 显示版本信息 |
| `--config <path>` | 指定配置文件路径 |
| `--log-level <level>` | 设置日志级别 |
| `--debug` | 启用调试模式 |
| `--theme <theme>` | 指定应用主题 |

## 下一步

- 查看 [日志管理](log_management.md)
- 了解 [任务管理](task_management.md)
- 查看 [配置参考](../configuration/options.md)
